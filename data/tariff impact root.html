<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Tariff Economic Impact Simulator – Trade Volume Breakdown Version</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        /* Overall container, centered and responsive */
        .container { 
            max-width: 1200px; 
            margin: 20px auto; 
            font-family: Arial, sans-serif;
        }
        h2 { 
            text-align: center; 
            margin-bottom: 20px; 
        }
        /* Slider styles */
        .slider-container { 
            margin: 20px 0; 
            text-align: center;
        }
        .slider-container label { 
            font-size: 1.1em; 
            font-weight: bold; 
        }
        /* Grid layout for indicators */
        .indicator-grid { 
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        .indicator-box { 
            background: #f5f5f5; 
            padding: 15px; 
            border-left: 4px solid #4CAF50;
            border-radius: 6px;
            min-height: 180px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .indicator-box h3 { 
            font-size: 1.2em; 
            margin-top: 0; 
        }
        .trade-details { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 10px; 
            margin-top: 10px;
        }
        .formula { 
            color: #666; 
            font-size: 0.9em; 
            margin-top: 5px; 
        }
        /* Chart container */
        #mainChart { 
            height: 500px; 
            margin-top: 20px; 
        }
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .trade-details { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>U.S. Tariff Economic Impact Simulator (2023 Baseline)</h2>
        
        <div class="slider-container">
            <label>Tariff Rate: <span id="tariffValue">25</span>%</label>
            <input type="range" min="0" max="100" value="25" class="slider" id="tariffSlider">
        </div>

        <div class="indicator-grid">
            <!-- Core Economic Indicators -->
            <div class="indicator-box">
                <h3>Core Economic Indicators</h3>
                <div class="trade-details">
                    <div>
                        <div>Import Volume</div>
                        <div id="importValue">-</div>
                    </div>
                    <div>
                        <div>Export Volume</div>
                        <div id="exportValue">-</div>
                    </div>
                    <div>
                        <div>Total Trade</div>
                        <div id="totalTrade">-</div>
                    </div>
                </div>
                <!-- Existing indicators: GDP Growth and Inflation -->
                <div id="macroIndicators">
                    <p>GDP Growth: <b id="gdpGrowthValue">-</b>
                        <div class="formula">ΔGDP = 2.1% + (ΔTariff × elasticity)</div>
                    </p>
                    <p>Inflation Rate: <b id="inflationValue">-</b>
                        <div class="formula">CPI = 2.8% + (ΔTariff × priceEffect)</div>
                    </p>
                </div>
                <!-- Additional indicators -->
                <div id="extraMacroIndicators">
                    <p>Trade Growth Rate: <b id="tradeGrowthValue">-</b>
                        <div class="formula">ΔTrade = (New Trade - Baseline Trade)/Baseline Trade</div>
                    </p>
                    <p>Total Trade Value Growth Rate: <b id="totalTradeGrowthValue">-</b>
                        <div class="formula">ΔTotal Value = (New Value - Baseline Value)/Baseline Value</div>
                    </p>
                </div>
            </div>
            
            <!-- Business & Household Indicators -->
            <div class="indicator-box">
                <h3>Business & Household</h3>
                <div id="businessIndicators">
                    <p>Government Tariff Revenue: <b id="govRevenueValue">-</b>
                        <div class="formula">Revenue = Import × Tariff Rate</div>
                    </p>
                    <p>USD Exchange Rate: <b id="exchangeRateValue">-</b>
                        <div class="formula">ΔRate = -0.2% × ΔTariff</div>
                    </p>
                    <p>Corporate Profit Margin: <b id="corporateProfitValue">-</b>
                        <div class="formula">Profit = 100 × [1 + 2×ΔGDP]</div>
                    </p>
                    <p>Household Consumption Capacity: <b id="consumptionValue">-</b>
                        <div class="formula">Consumption = Actual Income × (1 + consumption elasticity × ΔTariff)</div>
                    </p>
                    <p>S&P 500 Index: <b id="sp500Value">-</b>
                        <div class="formula">S&P500 = Baseline × [1 + (GDP Growth - Inflation) × equity elasticity]</div>
                    </p>
                </div>
                <!-- Additional business indicators -->
                <div id="extraBusinessIndicators">
                    <p>Median Household Income: <b id="householdIncomeValue">-</b>
                        <div class="formula">Income = Baseline × (1 - Inflation)</div>
                    </p>
                    <p>Consumption Growth Rate: <b id="consumptionGrowthValue">-</b></p>
                    <p>Investment Growth Rate: <b id="investmentGrowthValue">-</b></p>
                    <p>USD Exchange Rate Change: <b id="exchangeRateChangeValue">-</b></p>
                </div>
            </div>
        </div>

        <canvas id="mainChart"></canvas>
    </div>

<script>
    // Baseline Data (Source: World Bank/FRED 2023)
    const baseData = {
        importValue: 3.4e12,    // Import value
        exportValue: 2.5e12,    // Export value
        baseCPI: 2.8,           // Baseline inflation rate
        baseGDP: 2.1,           // Baseline GDP growth rate
        sp500: 4500,            // S&P 500 index
        householdIncome: 75e3,  // Median household income
        elasticity: {
            import: -0.6,       // Import elasticity
            export: -0.2,       // Export elasticity
            priceEffect: 0.25,  
            gdpEffect: -0.03,   
            equity: -1.2,       
            consumption: -0.3,
            // Additional assumed value (investment elasticity)
            investment: 0.15
        }
    };

    let mainChart = null;

    function initChart() {
        const ctx = document.getElementById('mainChart').getContext('2d');
        mainChart = new Chart(ctx, {
            type: 'line',
            data: { 
                labels: ['Current', 'New Policy'], 
                datasets: [
                    { label: 'GDP Growth (%)', borderColor: '#4CAF50', data: [] },
                    { label: 'Inflation (%)', borderColor: '#FF5722', data: [] }
                ]
            },
            options: { 
                responsive: true, 
                scales: { y: { beginAtZero: false } } 
            }
        });
    }

    function updateEconomics(tariff) {
        const deltaTariff = tariff - 25;

        // Trade volume calculations
        const importVal = baseData.importValue * (1 + baseData.elasticity.import * deltaTariff / 100);
        const exportVal = baseData.exportValue * (1 + baseData.elasticity.export * deltaTariff / 100);
        const totalTrade = (importVal + exportVal) / 1e12;

        // Other indicator calculations
        const inflation = baseData.baseCPI + baseData.elasticity.priceEffect * deltaTariff;
        const gdpGrowth = baseData.baseGDP + baseData.elasticity.gdpEffect * deltaTariff;
        const govRevenue = importVal * tariff / 100;
        const exchangeRate = 6.9 * (1 - 0.002 * deltaTariff);
        const sp500 = baseData.sp500 * (1 + (gdpGrowth / 100 - inflation / 100) * baseData.elasticity.equity);
        const consumption = baseData.householdIncome * (1 - inflation / 100) * (1 + baseData.elasticity.consumption * deltaTariff / 100);
        const corporateProfit = 100 * (1 + (gdpGrowth - baseData.baseGDP) / 100 * 2);
        const investment = corporateProfit * (1 + baseData.elasticity.investment * deltaTariff / 100);
        const householdIncome = baseData.householdIncome * (1 - inflation / 100) * (1 + baseData.elasticity.consumption * deltaTariff / 100);
        const tradeGrowth = (importVal + exportVal - (baseData.importValue + baseData.exportValue)) / (baseData.importValue + baseData.exportValue) * 100;
        const totalTradeValue = (importVal + exportVal) / 1e12;
        const totalTradeGrowth = (totalTradeValue - (baseData.importValue + baseData.exportValue) / 1e12) / ((baseData.importValue + baseData.exportValue) / 1e12) * 100;
        const householdIncomeGrowth = (householdIncome - baseData.householdIncome) / baseData.householdIncome * 100;
        const consumptionGrowth = (consumption - baseData.householdIncome) / baseData.householdIncome * 100;
        const investmentGrowth = (investment - corporateProfit) / corporateProfit * 100;
        const exchangeRateChange = (exchangeRate - 6.9) / 6.9 * 100;

        // Update trade volume display
        document.getElementById('importValue').innerHTML = 
            `$${(importVal / 1e12).toFixed(2)}T <div class="formula">IM = 3.4T × (1${baseData.elasticity.import}×ΔT)</div>`;
        document.getElementById('exportValue').innerHTML = 
            `$${(exportVal / 1e12).toFixed(2)}T <div class="formula">EX = 2.5T × (1${baseData.elasticity.export}×ΔT)</div>`;
        document.getElementById('totalTrade').innerHTML = 
            `$${totalTrade.toFixed(2)}T <div class="formula">Total Trade = IM + EX</div>`;

        // Update core economic indicators (existing and additional)
        document.getElementById('macroIndicators').innerHTML = `
            <p>GDP Growth: <b>${gdpGrowth.toFixed(1)}%</b>
                <div class="formula">ΔGDP = 2.1% + (${baseData.elasticity.gdpEffect}×ΔT)</div>
            </p>
            <p>Inflation Rate: <b>${inflation.toFixed(1)}%</b>
                <div class="formula">CPI = 2.8% + (${baseData.elasticity.priceEffect}×ΔT)</div>
            </p>
        `;
        document.getElementById('extraMacroIndicators').innerHTML = `
            <p>Trade Growth Rate: <b>${tradeGrowth.toFixed(1)}%</b>
                <div class="formula">ΔTrade = (New Trade - Baseline Trade)/Baseline Trade</div>
            </p>
            <p>Total Trade Value Growth Rate: <b>${totalTradeGrowth.toFixed(1)}%</b>
                <div class="formula">ΔTotal Value = (New Value - Baseline Value)/Baseline Value</div>
            </p>
        `;

        // Update business & household indicators (existing and additional)
        document.getElementById('businessIndicators').innerHTML = `
            <p>Government Tariff Revenue: <b>$${(govRevenue / 1e9).toFixed(1)}B</b>
                <div class="formula">Revenue = Import × ${tariff}%</div>
            </p>
            <p>USD Exchange Rate: <b>${exchangeRate.toFixed(2)} CNY/USD</b>
                <div class="formula">ΔRate = -0.2%×ΔT</div>
            </p>
            <p>Corporate Profit Margin: <b>${corporateProfit.toFixed(1)}%</b>
                <div class="formula">Profit = 100×[1 + 2×ΔGDP]</div>
            </p>
            <p>Household Consumption Capacity: <b>$${consumption.toFixed(0)}</b>
                <div class="formula">Consumption = Actual Income×(1+${baseData.elasticity.consumption}×ΔT)</div>
            </p>
            <p>S&P 500 Index: <b>${sp500.toFixed(0)}</b>
                <div class="formula">S&P500 = Baseline×[1+(GDP Growth - CPI)×${baseData.elasticity.equity}]</div>
            </p>
        `;
        document.getElementById('extraBusinessIndicators').innerHTML = `
            <p>Median Household Income: <b>$${householdIncome.toFixed(0)}</b>
                <div class="formula">Income = Baseline×(1 - Inflation)</div>
            </p>
            <p>Consumption Growth Rate: <b>${consumptionGrowth.toFixed(1)}%</b></p>
            <p>Investment Growth Rate: <b>${investmentGrowth.toFixed(1)}%</b></p>
            <p>USD Exchange Rate Change: <b>${exchangeRateChange.toFixed(1)}%</b></p>
        `;

        // Update chart data
        mainChart.data.datasets[0].data = [baseData.baseGDP, gdpGrowth];
        mainChart.data.datasets[1].data = [baseData.baseCPI, inflation];
        mainChart.update();
    }

    document.getElementById('tariffSlider').addEventListener('input', e => {
        const tariff = parseInt(e.target.value);
        document.getElementById('tariffValue').textContent = tariff;
        updateEconomics(tariff);
    });

    initChart();
    updateEconomics(25);
</script>
</body>
</html>
